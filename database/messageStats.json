{
  "undefined": {
    "function trackInteraction(userID, threadID, count = 1) {\r\n    try {\r\n        const userDataPath = path.join(__dirname, \"../events/cache/userData.json\");\r\n        const messageDataPath = path.join(__dirname, \"../database/messageStats.json\");\r\n        \r\n        // Đọc userData\r\n        let userData = {};\r\n        if (fs.existsSync(userDataPath)) {\r\n            userData = JSON.parse(fs.readFileSync(userDataPath, \"utf8\") || \"{}\");\r\n        }\r\n        \r\n        // Đọc messageStats\r\n        let messageStats = {};\r\n        if (fs.existsSync(messageDataPath)) {\r\n            messageStats = JSON.parse(fs.readFileSync(messageDataPath, \"utf8\") || \"{}\");\r\n        }\r\n        \r\n        // Khởi tạo cấu trúc dữ liệu nếu chưa có\r\n        if (!messageStats[threadID]) messageStats[threadID] = {};\r\n        if (!messageStats[threadID][userID]) messageStats[threadID][userID] = 0;\r\n        \r\n        // Cập nhật số tin nhắn\r\n        messageStats[threadID][userID] += count;\r\n        \r\n        // Cập nhật userData cũng với thông tin tương tác\r\n        if (!userData[userID]) userData[userID] = {};\r\n        if (!userData[userID].messageCount) userData[userID].messageCount = {};\r\n        userData[userID].messageCount[threadID] = messageStats[threadID][userID];\r\n        userData[userID].lastMessageTime = Date.now();\r\n        \r\n        // Lưu dữ liệu\r\n        fs.writeFileSync(messageDataPath, JSON.stringify(messageStats, null, 2), \"utf8\");\r\n        fs.writeFileSync(userDataPath, JSON.stringify(userData, null, 2), \"utf8\");\r\n        \r\n        return true;\r\n    } catch (error) {\r\n        console.error(\"Error tracking interaction:\", error);\r\n        return false;\r\n    }\r\n}": 1,
    "function trackInteraction(userID, threadID, count = 1) {\r\n    try {\r\n        const userDataPath = path.join(__dirname, \"../events/cache/userData.json\");\r\n        const messageDataPath = path.join(__dirname, \"../database/messageStats.json\");\r\n\r\n        let userData = {};\r\n        if (fs.existsSync(userDataPath)) {\r\n            userData = JSON.parse(fs.readFileSync(userDataPath, \"utf8\") || \"{}\");\r\n        }\r\n\r\n        let messageStats = {};\r\n        if (fs.existsSync(messageDataPath)) {\r\n            messageStats = JSON.parse(fs.readFileSync(messageDataPath, \"utf8\") || \"{}\");\r\n        }\r\n\r\n        if (!messageStats[threadID]) messageStats[threadID] = {};\r\n        if (!messageStats[threadID][userID]) messageStats[threadID][userID] = 0;\r\n\r\n        messageStats[threadID][userID] += count;\r\n\r\n        if (!userData[userID]) userData[userID] = {};\r\n        if (!userData[userID].messageCount) userData[userID].messageCount = {};\r\n        userData[userID].messageCount[threadID] = messageStats[threadID][userID];\r\n        userData[userID].lastMessageTime = Date.now();\r\n\r\n        fs.writeFileSync(messageDataPath, JSON.stringify(messageStats, null, 2), \"utf8\");\r\n        fs.writeFileSync(userDataPath, JSON.stringify(userData, null, 2), \"utf8\");\r\n\r\n        return true;\r\n    } catch (error) {\r\n        console.error(\"Error tracking interaction:\", error);\r\n        return false;\r\n    }\r\n}": 1,
    "function trackInteraction(userID, threadID, count = 1) {\r\n    try {\r\n        const userDataPath = path.join(__dirname, \"../events/cache/userData.json\");\r\n        const messageDataPath = path.join(__dirname, \"../database/messageStats.json\");\r\n\r\n        let userData = {};\r\n        if (fs.existsSync(userDataPath)) {\r\n            userData = JSON.parse(fs.readFileSync(userDataPath, \"utf8\") || \"{}\");\r\n        }\r\n\r\n        let messageStats = {};\r\n        if (fs.existsSync(messageDataPath)) {\r\n            messageStats = JSON.parse(fs.readFileSync(messageDataPath, \"utf8\") || \"{}\");\r\n        }\r\n\r\n        if (!messageStats[threadID]) messageStats[threadID] = {};\r\n        if (!messageStats[threadID][userID]) messageStats[threadID][userID] = {\r\n            total: 0,\r\n            weekly: 0,\r\n            daily: 0,\r\n            lastReset: Date.now()\r\n        };\r\n\r\n        const stats = messageStats[threadID][userID];\r\n        const now = Date.now();\r\n        const oneDay = 24 * 60 * 60 * 1000;\r\n        const oneWeek = 7 * oneDay;\r\n\r\n        // Reset daily/weekly counters if needed\r\n        if (now - stats.lastReset > oneDay) {\r\n            stats.daily = 0;\r\n            if (now - stats.lastReset > oneWeek) {\r\n                stats.weekly = 0;\r\n            }\r\n            stats.lastReset = now;\r\n        }\r\n\r\n        stats.total += count;\r\n        stats.daily += count;\r\n        stats.weekly += count;\r\n\r\n        // Update user data\r\n        if (!userData[userID]) userData[userID] = {};\r\n        userData[userID].messageCount = {\r\n            ...userData[userID].messageCount || {},\r\n            [threadID]: stats.total\r\n        };\r\n        userData[userID].lastMessageTime = now;\r\n\r\n        // Calculate experience and level\r\n        const exp = Math.floor(stats.total / 10);\r\n        const level = Math.floor(Math.log2(exp + 1)) + 1;\r\n        userData[userID].exp = exp;\r\n        userData[userID].level = level;\r\n\r\n        fs.writeFileSync(messageDataPath, JSON.stringify(messageStats, null, 2), \"utf8\");\r\n        fs.writeFileSync(userDataPath, JSON.stringify(userData, null, 2), \"utf8\");\r\n\r\n        return true;\r\n    } catch (error) {\r\n        console.error(\"Error tracking interaction:\", error);\r\n        return false;\r\n    }\r\n}": {
      "total": 1,
      "weekly": 1,
      "daily": 1,
      "lastReset": 1742545101551
    },
    "function trackInteraction(userID, threadID, count = 1) {\r\n    try {\r\n        const userDataPath = path.join(__dirname, \"../events/cache/userData.json\");\r\n        const messageDataPath = path.join(__dirname, \"../database/messageStats.json\");\r\n        \r\n        let userData = {};\r\n        if (fs.existsSync(userDataPath)) {\r\n            userData = JSON.parse(fs.readFileSync(userDataPath, \"utf8\") || \"{}\");\r\n        }\r\n        \r\n        let messageStats = {};\r\n        if (fs.existsSync(messageDataPath)) {\r\n            messageStats = JSON.parse(fs.readFileSync(messageDataPath, \"utf8\") || \"{}\");\r\n        }\r\n        \r\n        if (!messageStats[threadID]) messageStats[threadID] = {};\r\n        if (!messageStats[threadID][userID]) messageStats[threadID][userID] = 0;\r\n        \r\n        messageStats[threadID][userID] += count;\r\n        \r\n        if (!userData[userID]) userData[userID] = {};\r\n        if (!userData[userID].messageCount) userData[userID].messageCount = {};\r\n        userData[userID].messageCount[threadID] = messageStats[threadID][userID];\r\n        userData[userID].lastMessageTime = Date.now();\r\n        \r\n        fs.writeFileSync(messageDataPath, JSON.stringify(messageStats, null, 2), \"utf8\");\r\n        fs.writeFileSync(userDataPath, JSON.stringify(userData, null, 2), \"utf8\");\r\n        \r\n        return true;\r\n    } catch (error) {\r\n        console.error(\"Error tracking interaction:\", error);\r\n        return false;\r\n    }\r\n}": 1
  }
}